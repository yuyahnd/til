# git submodule

git-submodule - Initialize, update or inspect submodules

## SYNOPSIS

```
git submodule [--quiet] [--cached]
git submodule [--quiet] add [<options>] [--] <repository> [<path>]
git submodule [--quiet] status [--cached] [--recursive] [--] [<path>…​]
git submodule [--quiet] init [--] [<path>…​]
git submodule [--quiet] deinit [-f|--force] (--all|[--] <path>…​)
git submodule [--quiet] update [<options>] [--] [<path>…​]
git submodule [--quiet] set-branch [<options>] [--] <path>
git submodule [--quiet] set-url [--] <path> <newurl>
git submodule [--quiet] summary [<options>] [--] [<path>…​]
git submodule [--quiet] foreach [--recursive] <command>
git submodule [--quiet] sync [--recursive] [--] [<path>…​]
git submodule [--quiet] absorbgitdirs [--] [<path>…​]
```

## DESCRIPTION
サブモジュールを検査、更新、管理します。
サブモジュールの詳細についてはgitsubmodulesを参照してください。

## COMMANDS
引数を指定しない場合は、既存のサブモジュールのステータスを表示します。サブモジュールに対して操作を実行するためのサブコマンドがいくつかあります。

* add [-b \<branch>] [-f|--force] [--name \<name>] [--reference \<repository>] [--ref-format \<format>] [--depth \<depth>] [--] \<repository> [\<path>]

指定されたリポジトリを、現在のプロジェクトの次にコミットされる変更セットへの指定されたパスのサブモジュールとして追加します。現在のプロジェクトは「スーパープロジェクト」と呼ばれます。

\<repository> は、新しいサブモジュールの元のリポジトリの URL です。これは絶対 URL か、（./ または ../ で始まる場合は）スーパープロジェクトのデフォルトのリモートリポジトリからの相対パスで指定します（スーパープロジェクト bar.git のすぐ隣にあるリポジトリ foo.git を指定する場合は、./foo.git ではなく ../foo.git を使用する必要があります。これは、相対 URL のルールに従うと当然のことですが、Git における相対 URL の評価は相対ディレクトリの評価と同じであるためです）。

デフォルトのリモートは、現在のブランチのリモート追跡ブランチのリモートです。そのようなリモート追跡ブランチが存在しない場合、またはHEADがデタッチされている場合は、「origin」がデフォルトのリモートとみなされます。スーパープロジェクトにデフォルトのリモートが設定されていない場合、スーパープロジェクトは独自の権限のあるアップストリームとなり、代わりに現在の作業ディレクトリが使用されます。

オプションの引数 \<path> は、クローンされたサブモジュールがスーパープロジェクト内に存在する相対的な場所です。\<path> が指定されていない場合は、ソース リポジトリの正規部分が使用されます (「/path/to/repo.git」の場合は「repo」、 「host.xz:foo/.git」の場合は「foo」)。\<path> が存在し、既に有効な Git リポジトリである場合、クローンせずにコミットのためにステージングされます。\<path> は、--name を使用して論理名を指定しない限り、サブモジュールの設定エントリ内での論理名としても使用されます。

指定された URL は、スーパープロジェクトを複製する後続のユーザーが使用できるように .gitmodules に記録されます。URL がスーパープロジェクトのリポジトリからの相対パスで指定されている場合、スーパープロジェクトとサブモジュールのリポジトリは同じ相対パスに一緒に保存されるものとみなされ、スーパープロジェクトの URL のみを指定する必要があります。git-submodule は、.gitmodules 内の相対 URL を使用してサブモジュールを正しく見つけます。

--ref-format \<format> が指定されている場合、新しく複製されたサブモジュールの ref ストレージ形式がそれに応じて設定されます。

* status [--cached] [--recursive] [--] [\<path>…​]  
サブモジュールのステータスを表示します。これにより、各サブモジュールについて、現在チェックアウトされているコミットのSHA-1、サブモジュールのパス、およびSHA-1のgit describeの出力が表示されます。各SHA-1には、サブモジュールが初期化されていない場合は「-」、現在チェックアウトされているサブモジュールのコミットが、そのサブモジュールを含むリポジトリのインデックスにあるSHA-1と一致しない場合は「+」、サブモジュールにマージ競合がある場合は「U」がプレフィックスとして付加される可能性があります。  
--cached が指定されている場合、このコマンドは代わりに各サブモジュールのスーパープロジェクトに記録された SHA-1 を出力します。<br><br>--recursive が指定されている場合、このコマンドはネストされたサブモジュールを再帰的に実行し、それらのステータスも表示します。<br><br>インデックスまたはHEADに記録されたコミットに関して、現在初期化されているサブモジュールの変更のみに興味がある場合は、git-statusと git-diff でもその情報を提供します（サブモジュールの作業ツリーへの変更も報告できます）。

* init [--] [\<path>…​]
インデックスに記録されているサブモジュール（他の場所で追加およびコミットされたもの）を初期化するために、.git/config に submodule.$name.url を設定します。この設定は、.gitmodules と同じ設定をテンプレートとして使用します。URL が相対パスの場合、デフォルトのリモートリポジトリを使用して解決されます。デフォルトのリモートリポジトリが存在しない場合は、現在のリポジトリが上流リポジトリであるとみなされます。<br><br>オプションの\<path>引数は、初期化するサブモジュールを制限します。パスが指定されておらず、submodule.activeが設定されている場合は、アクティブに設定されているサブモジュールが初期化されます。それ以外の場合は、すべてのサブモジュールが初期化されます。<br><br>また、.gitmodules ファイルに submodule.$name.update の値が存在する場合は .git/config にコピーされますが、(1) このコマンドは .git/config 内の既存の情報を変更せず、(2) カスタム コマンドに設定されている submodule.$name.update はセキュリティ上の理由からコピーされません。<br><br>次に、ローカル セットアップの .git/config 内のサブモジュール クローン URL をカスタマイズし、git submodule update に進みます。サブモジュールの場所をカスタマイズするつもりがない場合は、明示的な init ステップなしで git submodule update --init を使用することもできます。<br><br>デフォルト リモートの定義については、add サブコマンドを参照してください。

* deinit [-f|--force] (--all|[--] \<path>…​)  
指定されたサブモジュールの登録を解除します。つまり、.git/config から submodule.$name セクション全体と、その作業ツリーを削除します。git submodule update、git submodule foreach、git submodule sync の呼び出しは、登録されていないサブモジュールを再度初期化するまでスキップします。そのため、作業ツリーにサブモジュールのローカルチェックアウトを保存したくない場合は、このコマンドを使用してください。<br><br>コマンドを pathspec なしで実行すると、間違いを防ぐためにすべてを deinit するのではなく、エラーを出力します。<br><br>--force が指定された場合、サブモジュールの作業ツリーは、ローカルの変更が含まれていても削除されます。<br><br>リポジトリからサブモジュールを削除してコミットしたい場合は、git-rm[1]を使用してください。削除オプションについてはgitsubmodulesを参照してください。

* update [--init] [--remote] [-N|--no-fetch] [--[no-]recommend-shallow] [-f|--force] [--checkout|--rebase|--merge] [--reference \<repository>] [--ref-format \<format>] [--depth \<depth>] [--recursive] [--jobs \<n>] [--[no-]single-branch] [--filter \<filter-spec>] [--] [\<path>…​]  
不足しているサブモジュールをクローンし、サブモジュール内の不足しているコミットを取得し、サブモジュールのワーキングツリーを更新することで、登録済みのサブモジュールをスーパープロジェクトの期待値に合わせて更新します。「更新」は、コマンドラインオプションと submodule.<name>.update 設定変数の値に応じて、複数の方法で実行できます。コマンドラインオプションは設定変数よりも優先されます。どちらも指定されていない場合は、チェックアウトが実行されます。(注: .gitmodules ファイルの内容はこの時点では無関係です。.gitmodules の使用方法については、上記の git submodule init を参照してください)。コマンドラインと submodule.<name>.update 設定の両方でサポートされている更新手順は次のとおりです。

  * checkout  
  スーパープロジェクトに記録されたコミットは、分離された HEAD 上のサブモジュールにチェックアウトされます。<br><br>--force が指定されている場合は、サブモジュールを含むリポジトリのインデックスで指定されたコミットがサブモジュールでチェックアウトされたコミットと既に一致している場合でも、サブモジュールはチェックアウトされます (git checkout --force を使用)。

  * rebase  
  サブモジュールの現在のブランチは、スーパープロジェクトに記録されたコミットに基づいてリベースされます。

  * merge  
  スーパープロジェクトに記録されたコミットは、サブモジュールの現在のブランチにマージされます。  
  次の更新手順には追加の制限があります。

  * custom command  
  コミットIDを引数として任意のコマンドを実行するためのメカニズムです。具体的には、submodule.<name>.update 設定変数が !custom command に設定されている場合、サブモジュールのスーパープロジェクトに記録されたコミットのオブジェクト名がカスタムコマンド文字列に追加されて実行されます。このメカニズムは、.gitmodules ファイルおよびコマンドラインではサポートされていないことに注意してください。

  * none  
  サブモジュールは更新されません。この更新手順はコマンドラインでは実行できません。<br><br>サブモジュールがまだ初期化されておらず、.gitmodules に保存されている設定だけを使用する場合は、--init オプションを使用してサブモジュールを自動的に初期化できます。 <br><br>--recursive が指定されている場合、このコマンドは登録されたサブモジュールを再帰的に実行し、その中のネストされたサブモジュールを更新します。<br><br>--ref-format <format> が指定されている場合、新しく複製されたサブモジュールの ref ストレージ形式がそれに応じて設定されます。<br><br>--filter \<filter-spec> が指定された場合、指定された部分クローンフィルタがサブモジュールに適用されます。フィルタ仕様の詳細については、git-rev-list を参照してください。
  
  * set-branch (-b|--branch) \<branch> [--] \<path>  
  * set-branch (-d|--default) [--] \<path>  
  サブモジュールのデフォルトのリモート追跡ブランチを設定します。--branch オプションを使用すると、リモートブランチを指定できます。--default オプションは、submodule.\<name>.branch 設定キーを削除し、追跡ブランチのデフォルトをリモート HEAD に設定します。

  * set-url [--] \<path> \<<newurl>  
  指定されたサブモジュールのURLを\<newurl>に設定します。その後、サブモジュールの新しいリモートURL設定が自動的に同期されます。

  * summary [--cached|--files] [(-n|--summary-limit) \<n>] [commit] [--] [\<path>…​]  
  指定されたコミット（デフォルトはHEAD）とワーキングツリー／インデックス間のコミットサマリーを表示します。対象のサブモジュールについては、指定されたスーパープロジェクトのコミットとインデックスまたはワーキングツリー（--cachedで切り替え可能）間のサブモジュール内の一連のコミットが表示されます。オプション--filesが指定されている場合は、スーパープロジェクトのインデックスとサブモジュールのワーキングツリー間のサブモジュール内の一連のコミットを表示します（このオプションでは、--cachedオプションの使用や明示的なコミットの指定は許可されません）。<br><br>git-diff で--submodule=logオプションを使用すると、その情報も提供されます。
  
  * foreach [--recursive] \<command>  
  チェックアウトされた各サブモジュールで任意のシェル コマンドを評価します。このコマンドは、変数 $name、$sm_path、$displaypath、$sha1、および $toplevel にアクセスできます。$name は .gitmodules 内の関連するサブモジュール セクションの名前、$sm_path は直近のスーパープロジェクトに記録されているサブモジュールのパス、$displaypath には現在の作業ディレクトリからサブモジュールのルート ディレクトリへの相対パス、$sha1 は直近のスーパープロジェクトに記録されているコミット、$toplevel は直近のスーパープロジェクトのトップレベルへの絶対パスです。Windows での $PATH との競合を避けるため、$path 変数は $sm_path 変数の非推奨の同義語になりました。スーパープロジェクトで定義されているがチェックアウトされていないサブモジュールは、このコマンドでは無視されます。--quiet が指定されない限り、foreach はコマンドを評価する前に各サブモジュールの名前を出力します。 --recursive が指定された場合、サブモジュールは再帰的に走査されます（つまり、指定されたシェルコマンドはネストされたサブモジュールでも評価されます）。サブモジュール内のコマンドから0以外の値が返されると、処理は終了します。これは、コマンドの末尾に || : を追加することで上書きできます。<br><br>例として、以下のコマンドは各サブモジュールのパスと現在チェックアウトされているコミットを表示します。

  ```
  git submodule foreach 'echo $sm_path `git rev-parse HEAD`'
  ```
  
  * sync [--recursive] [--] [\<path>…​]  
  サブモジュールのリモートURL設定を.gitmodulesで指定された値に同期します。これは、.git/configに既にURLエントリがあるサブモジュール（初期化されたとき、または新規追加されたとき）にのみ影響します。これは、サブモジュールのアップストリームURLが変更され、それに応じてローカルリポジトリを更新する必要がある場合に便利です。<br><br>git submodule sync はすべてのサブモジュールを同期しますが、 git submodule sync -- A はサブモジュール「A」のみを同期します。<br><br>--recursive が指定されている場合、このコマンドは登録されたサブモジュールを再帰的に実行し、その中にあるネストされたサブモジュールを同期します。

  * absorbgitdirs  
  サブモジュールの git ディレクトリがサブモジュール内にある場合は、サブモジュールの git ディレクトリをスーパープロジェクトの $GIT_DIR/modules パスに移動し、core.worktree を設定してスーパープロジェクトの git ディレクトリに埋め込まれた git ディレクトリを指す .git ファイルを追加することで、git ディレクトリと作業ディレクトリを接続します。<br><br>独立してクローン作成され、後でサブモジュールとして追加されたリポジトリ、または古いセットアップでは、サブモジュールの git ディレクトリが、スーパープロジェクトの git ディレクトリに埋め込まれるのではなく、サブモジュール内に存在します。<br><br>このコマンドはデフォルトで再帰的です。

## OPTIONS

* -q
* --quiet  
 