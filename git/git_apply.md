# git apply

## NAME
git-apply - Apply a patch to files and/or to the index

## DESCRIPTION 
提供された diff 出力 (つまり「パッチ」) を読み取り、ファイルに適用します。リポジトリ内のサブディレクトリから実行する場合、ディレクトリ外のパッチ パスは無視されます。--index オプションを使用すると、パッチはインデックスにも適用され、--cached オプションを使用すると、パッチはインデックスにのみ適用されます。これらのオプションがない場合、コマンドはファイルにのみパッチを適用し、ファイルが Git リポジトリ内にある必要はありません。

このコマンドはパッチを適用しますが、コミットは作成しません。git-format-patch[1]によって生成されたパッチや電子メールで受信したパッチからコミットを作成するには、git-am[1]を使用します。

## OPTIONS

* \<patch>…​  
パッチを読み込むファイル。- は標準入力から読み取るために使用できます。

* --stat  
パッチを適用する代わりに、入力の diffstat を出力します。「apply」をオフにします。

* --numstat  
--stat に似ていますが、マシンフレンドリーになるように、追加および削除された行数を 10 進表記で表示し、パス名を省略せずに表示します。バイナリ ファイルの場合、0 0 ではなく 2 つの - を出力します。「適用」をオフにします。

* --summary  
パッチを適用する代わりに、作成、名前の変更、モードの変更など、git diff 拡張ヘッダーから取得した情報の要約を出力します。「適用」をオフにします。

* --check  
パッチを適用する代わりに、パッチが現在の作業ツリーやインデックス ファイルに適用可能かどうかを確認し、エラーを検出します。「適用」をオフにします。

* --index  
パッチをインデックスと作業ツリーの両方に適用します (または、--check が有効な場合は、両方にパッチが適切に適用されるかどうかを確認します)。--index は、関連するパスのインデックス エントリと作業ツリーのコピーが同一である (その内容とファイル モードなどのメタデータが一致している必要がある) ことを想定しており、パッチがインデックスと作業ツリーの両方に個別に適切に適用される場合でも、同一でない場合はエラーが発生することに注意してください。

* --cached  
作業ツリーには触れずに、インデックスのみにパッチを適用します。--check が有効な場合は、インデックス エントリにパッチが適切に適用されるかどうかのみをチェックします。

* --intent-to-add  
パッチを作業ツリーにのみ適用する場合、後でインデックスに追加される新しいファイルをマークします (git-add[1] の --intent-to-add オプションを参照)。このオプションは、Git リポジトリで実行され、--index が指定されていない場合を除き、無視されます。--index は、--cached や --3way などの他のオプションによって暗示される可能性があることに注意してください。

* -3  
* --3way  
パッチが適用対象である BLOB の ID を記録し、それらの BLOB がローカルで使用できる場合は、3 方向マージを試行します。これにより、作業ツリーのファイルに競合マーカーが残り、ユーザーが解決できるようになります。このオプションは、--cached オプションが使用されない限り、--index オプションを意味し、--reject オプションとは互換性がありません。--cached オプションと一緒に使用すると、競合はキャッシュの上位ステージに残されます。

* --build-fake-ancestor=\<file>  
新しい git diff 出力には、パッチが適用される元のバージョンを識別するのに役立つ、各 BLOB のインデックス情報が埋め込まれています。このフラグが指定され、BLOB の元のバージョンがローカルで使用できる場合は、それらの BLOB を含む一時インデックスが作成されます。<br><br>純粋なモード変更 (インデックス情報がない) が発生した場合は、代わりに現在のインデックスから情報が読み取られます。

* -R  
* --reverse  
パッチを逆順に貼り付けます。

* --reject  
アトミック性のために、git apply はデフォルトでパッチ全体を失敗させ、一部のハンクが適用されない場合は作業ツリーには影響しません。このオプションにより、パッチの適用可能な部分が適用され、拒否されたハンクは対応する *.rej ファイルに残されます。

* -z  
--numstat が指定されている場合は、パス名を変更せず、NUL で終了する機械可読形式を使用します。<br><br>このオプションを指定しないと、「異常な」文字を含むパス名は、設定変数 core.quotePath の説明に従って引用符で囲まれます (git-config を参照)。

* -p\<n>
従来の diff パスから、先頭の \<n> 個のパス コンポーネント (スラッシュで区切る) を削除します。たとえば、-p2 を使用すると、a/dir/file に対するパッチがファイルに直接適用されます。デフォルトは 1 です。

* -C\<n>  
各変更の前後で、少なくとも \<n> 行の周囲のコンテキストが一致していることを確認します。周囲のコンテキストの行数が少ない場合は、すべてが一致している必要があります。デフォルトでは、コンテキストは無視されません。

* --unidiff-zero  
デフォルトでは、git apply は、適用されるパッチが少なくとも 1 行のコンテキストを含む統合 diff であると想定します。これは優れた安全対策ですが、--unified=0 で生成された diff を適用すると機能しなくなります。これらのチェックをバイパスするには、--unidiff-zero を使用します。<br><br>上記の理由により、コンテキストフリー パッチの使用は推奨されません。

* --apply  
上記の「適用をオフにする」とマークされたオプションのいずれかを使用すると、git apply は実際にパッチを適用せずに要求された情報を読み取って出力します。パッチも適用するには、これらのフラグの後にこのフラグを指定します。

* --no-add  
パッチを適用するときに、パッチによって行われた追加を無視します。これを使用すると、最初に diff を実行し、その結果をこのオプションで適用することで、2 つのファイル間の共通部分を抽出できます。これにより、削除部分は適用されますが、追加部分は適用されません。

* --allow-binary-replacement
* --binary  
これまで、ユーザーからの明示的な許可なしにバイナリ パッチの適用は許可していませんでした。このフラグは、そのための手段でした。現在は、バイナリ パッチの適用は常に許可されているため、これは何も行いません。

* --exclude=\<path-pattern>  
指定されたパス パターンに一致するファイルには変更を適用しません。これは、特定のファイルまたはディレクトリを除外するパッチセットをインポートするときに役立ちます。

* --include=\<path-pattern>  
指定されたパス パターンに一致するファイルに変更を適用します。これは、特定のファイルまたはディレクトリを含めるパッチセットをインポートするときに役立ちます。<br><br>--exclude および --include パターンが使用される場合、それらはコマンド ラインに表示される順序で検査され、最初の一致によって各パスへのパッチが使用されるかどうかが決定されます。コマンド ラインに include パターンがない場合、include/exclude パターンに一致しないパスへのパッチがデフォルトで使用され、include パターンがある場合は無視されます。

* --ignore-space-change  
* --ignore-whitespace  
パッチを適用する際、必要に応じてコンテキスト行の空白の変更を無視します。コンテキスト行は空白を保持し、--whitespace オプションの値に関係なく空白の修正は行われません。ただし、新しい行は修正されます。

* --whitespace=\<action>  
パッチを適用するときに、空白エラーのある新しい行または変更された行を検出します。空白エラーと見なされるものは、core.whitespace 構成によって制御されます。デフォルトでは、末尾の空白 (空白のみで構成される行を含む) と、行の最初のインデント内のタブ文字の直後に続くスペース文字は、空白エラーと見なされます。<br><Br>デフォルトでは、コマンドは警告メッセージを出力しますが、パッチを適用します。git-apply が統計に使用され、パッチを適用しない場合は、デフォルトで nowarn になります。<br><br>
この動作を制御するには、さまざまな \<action> 値を使用できます。<br>
    * nowarn は末尾の空白の警告をオフにします。
    * warn は、いくつかのそのようなエラーに対して警告を出力しますが、パッチはそのまま適用します (デフォルト)。
    * fix は、そのようなエラーのいくつかに対して警告を出力し、それらを修正した後にパッチを適用します (strip は同義語です。このツールは末尾の空白文字のみをエラーと見なすために使用され、fix ではそれらの削除が行われていましたが、最近の Git ではさらに多くのことが行われています)。
    * error は、いくつかのそのようなエラーに対して警告を出力し、パッチの適用を拒否します。
    * error-all は error と似ていますが、すべてのエラーを表示します。
