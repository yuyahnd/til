# git -diff

[Git - git-diff Documentation](https://git-scm.com/docs/git-diff)

## オプション

|オプション|説明|
|:--|:--|
|-p<br>-bu<br>--patch|パッチを生成します（パッチの生成に関するセクションを参照）。 これがデフォルトです。|
|-s<br>--no-patch|差分出力を抑制します。 デフォルトでパッチを表示するgitshowのようなコマンド、または--patchの効果をキャンセルする場合に便利です。|
|-U\<n\><br>--unified=\<n\>|通常の3行ではなく、\<n\>行のコンテキストで差分を生成します。 --patchを意味します。|
|--output=\<file\>|stdoutではなく特定のファイルに出力します。|
|--output-indicator-new=\<char\><br>--output-indicator-old=\<char\><br>--output-indicator-context=\<char\>|生成されたパッチの新しい行、古い行、またはコンテキスト行を示すために使用される文字を指定します。 通常、それらはそれぞれ+、-、および ''です。|
|--raw|生の形式で差分を生成します。|
|--patch-with-raw|-p --rawの同義語。|
|--indent-heuristic|差分ハンクの境界をシフトするヒューリスティックを有効にして、パッチを読みやすくします。 これがデフォルトです。|
|--no-indent-heuristic|インデントヒューリスティックを無効にします。|
|--minimal|可能な限り最小の差分が生成されるように、余分な時間を費やしてください。|
|--patience|「patience diff」アルゴリズムを使用してdiffを生成します。|
|--histogram|「ヒストグラムdiff」アルゴリズムを使用してdiffを生成します。|
|--anchored=\<text\>|"anchored diff" アルゴリズムを使用してdiffを生成します。<br><br>このオプションは複数回指定できます。<br><br>行がソースと宛先の両方に存在し、1回だけ存在し、このテキストで始まる場合、このアルゴリズムは、その行が出力に削除または追加として表示されないようにします。 内部で「忍耐差分」アルゴリズムを使用します。|
|--diff-algorithm={patience\|minimal\|histogram\|myers}|差分アルゴリズムを選択します。 バリアントは次のとおりです。※1|
|--stat[=\<width\>[,\<name-width\>[,\<count\>]]]|diffstatを生成します。 デフォルトでは、必要なだけのスペースがファイル名部分に使用され、残りはグラフ部分に使用されます。 最大幅はデフォルトで端末幅、または端末に接続されていない場合は80列であり、\<width\>で上書きできます。 ファイル名部分の幅は、コンマの後に別の幅\<name-width\>を指定することで制限できます。 グラフ部分の幅は、-stat-graph-width = \<width\>（統計グラフを生成するすべてのコマンドに影響します）を使用するか、diff.statGraphWidth = \<width\>（git format-patchには影響しません）を設定することによって制限できます。 。 3番目のパラメーター\<count\>を指定することにより、出力を最初の\<count\>行に制限し、さらにある場合は...を続けることができます。<br><br>これらのパラメータは、-stat-width = \<width\>、-stat-name-width = \<name-width\>、および--stat-count = \<count\>を使用して個別に設定することもできます。|
|--compact-summary|ファイルの作成または削除（「新規」または「終了」、オプションでシンボリックリンクの場合は「+ l」）およびモード変更（追加または削除の場合は「+ x」または「-x」）などの拡張ヘッダー情報の要約を出力します。 diffstatの実行可能ビット）。 情報はファイル名部分とグラフ部分の間に置かれます。 --statを意味します。|
|--numstat|--statに似ていますが、マシンフレンドリーにするために、追加および削除された行数を10進表記とパス名で省略形なしで表示します。 バイナリファイルの場合、00と言う代わりに2-を出力します。|
|--shortstat|--statに似ていますが、マシンフレンドリーにするために、追加および削除された行数を10進表記とパス名で省略形なしで表示します。 バイナリファイルの場合、00と言う代わりに2-を出力します。|
|-X[\<param1,param2,…\​>]<br>--dirstat[=\<param1,param2,…\​>]|各サブディレクトリの相対的な変更量の分布を出力します。 --dirstatの動作は、パラメーターのコンマ区切りリストを渡すことでカスタマイズできます。 デフォルトは、diff.dirstat構成変数によって制御されます（git-config [1]を参照）。 次のパラメータを使用できます。※2|
|--cumulative|--dirstat=cumulative の同義語|
|--dirstat-by-file[=\<param1,param2\>…​]|--dirstat=files,param1,param2…  の同義語​|
|--summary|作成、名前変更、モード変更などの拡張ヘッダー情報の要約を出力します。|
|--patch-with-stat|-p --stat と同義語​|
|-z|--raw、-numstat、-name-only、または--name-statusが指定されている場合は、パス名を変更せず、出力フィールドターミネータとしてNULを使用してください。<br><br>このオプションがないと、構成変数core.quotePathで説明されているように、「異常な」文字を含むパス名が引用符で囲まれます（git-config [1]を参照）。|
|--name-only|変更されたファイルの名前のみを表示します。|
|--name-status|変更されたファイルの名前とステータスのみを表示します。 ステータス文字の意味については、-diff-filterオプションの説明を参照してください。|
|--submodule[=\<format\>]|サブモジュールの違いをどのように表示するかを指定します。 --submodule = shortを指定すると、短い形式が使用されます。 この形式は、範囲の最初と最後にコミットの名前を表示するだけです。 --submoduleまたは--submodule = logを指定すると、ログ形式が使用されます。 この形式は、git-submodule [1]の要約のように範囲内のコミットをリストします。 --submodule = diffを指定すると、diff形式が使用されます。 この形式は、コミット範囲間のサブモジュールの内容の変更のインライン差分を示します。 configオプションが設定されていない場合、デフォルトはdiff.submoduleまたはshort形式です。|
|--color[=\<when\>]|色付きの差分を表示します。 --color（つまり、= \<when\>なし）は--color = alwaysと同じです。 \<when\>は、always、never、またはautoのいずれかになります。 これは、color.uiおよびcolor.diffの構成設定によって変更できます。|
|--no-color|色付きの差分をオフにします。 これは、構成設定をオーバーライドするために使用できます。 --color = neverと同じです。|
|--color-moved[=\<mode\>]|移動したコード行の色は異なります。 これは、diff.colorMoved構成設定によって変更できます。 <mode>は、オプションが指定されていない場合はデフォルトでnoになり、モードが指定されていない場合はzebraになります。 モードは次のいずれかである必要があります。※3|
|--no-color-moved|移動検出をオフにします。 これは、構成設定をオーバーライドするために使用できます。 --color-moved = noと同じです。|
|--color-moved-ws=\<modes\>|This configures how whitespace is ignored when performing the move detection for --color-moved. It can be set by the diff.colorMovedWS configuration setting. These modes can be given as a comma separated list:※4|
|--no-color-moved-ws|移動検出を実行するときは、空白を無視しないでください。 これは、構成設定をオーバーライドするために使用できます。 --color-moved-ws = noと同じです。|
|--word-diff[=\<mode\>]|移動検出を実行するときは、空白を無視しないでください。 これは、構成設定をオーバーライドするために使用できます。 --color-moved-ws = noと同じです。※5|
|--word-diff-regex=\<regex\>|非空白の実行を単語と見なす代わりに、\<regex\>を使用して単語が何であるかを決定します。 また、すでに有効になっていない限り、-word-diffを意味します。<br><br>\<regex\>の重複しない一致はすべて、単語と見なされます。 これらの一致の間のすべては空白と見なされ、違いを見つけるために無視されます（！）。 正規表現に\| [^ [：space：]]を追加して、空白以外のすべての文字と一致することを確認することをお勧めします。 改行を含む一致は、改行でサイレントに切り捨てられます（！）。<br>たとえば、-word-diff-regex =です。 各文字を単語として扱い、それに応じて、文字ごとの違いを示します。<br><br>正規表現は、diffドライバーまたは構成オプションを介して設定することもできます。gitattributes[5]またはgit-config [1]を参照してください。 これを指定すると、diffドライバーまたは構成設定が明示的にオーバーライドされます。 差分ドライバーは構成設定を上書きします。|
|--color-words[=\<regex\>]|--word-diff = color plus（正規表現が指定されている場合）-word-diff-regex = \<regex\>と同等です。|
|--no-renames|構成ファイルにデフォルトで指定されている場合でも、名前変更の検出をオフにします。|
|--[no-]rename-empty|名前の変更元として空のblobを使用するかどうか。|
|--check|変更によって競合マーカーまたは空白エラーが発生した場合に警告します。 空白エラーと見なされるものは、core.whitespace構成によって制御されます。 デフォルトでは、末尾の空白（空白のみで構成される行を含む）と、行の最初のインデント内で直後にタブ文字が続くスペース文字は、空白エラーと見なされます。 問題が見つかった場合は、ゼロ以外のステータスで終了します。 --exit-codeとは互換性がありません。|
|--ws-error-highlight=\<kind\>|コンテキスト内の空白エラー、差分の古い行または新しい行を強調表示します。 複数の値はコンマで区切られ、noneは前の値をリセットし、デフォルトはリストをnewにリセットし、allはold、new、contextの省略形です。 このオプションが指定されておらず、構成変数diff.wsErrorHighlightが設定されていない場合、新しい行の空白エラーのみが強調表示されます。 空白エラーはcolor.diff.whitespaceで色分けされています。|
|--full-index|パッチ形式の出力を生成するときは、最初の一握りの文字の代わりに、「インデックス」行にイメージ前およびイメージ後の完全なblobオブジェクト名を表示します。|
|--binary|--full-indexに加えて、git-applyで適用できるバイナリ差分を出力します。 --patchを意味します。|
|--abbrev[=\<n\>]|完全な 40 バイトの 16 進数のオブジェクト名を diff-raw 形式の出力と diff-tree ヘッダー行に表示する代わりに、オブジェクトを一意に参照する少なくとも \<n\> 16 進数の長さの最も短いプレフィックスを表示します。 diff-patch 出力形式では、 --full-index が優先されます。つまり、 --full-index が指定されている場合、 --abbrev に関係なく完全な BLOB 名が表示されます。 デフォルト以外の桁数は --abbrev=\<n\> で指定できます。|
|-B[\<n\>][/\<m\>]<br>--break-rewrites[=[\<n\>][/\<m\>]]|完全な書き換えの変更を削除と作成のペアに分割します。これには 2 つの目的があります。<br>これは、ファイルの完全な書き換えに相当する変更が、一連の削除と挿入がテキスト的にコンテキストとして一致する非常に少数の行と混合されたものとしてではなく、古いすべての単一の削除とそれに続くすべての新しいものを 1 回挿入します。数 m は、-B オプションのこの側面を制御します (デフォルトは 60%)。 -B/70% は、Git が完全な書き換えと見なすために、元の 30% 未満が結果に残される必要があることを指定します (つまり、結果として得られるパッチは、一連の削除と挿入がコンテキスト行と混合されたものになります)。<br>-M とともに使用すると、完全に書き換えられたファイルも名前変更のソースと見なされ (通常、-M は名前変更のソースとして消えたファイルのみを考慮します)、番号 n は -B オプションのこの側面を制御します。 (デフォルトは 50%)。 -B20% は、ファイル サイズの 20% 以上と比較して追加および削除による変更が、別のファイルへの名前変更の可能なソースとして選択される資格があることを指定します。|
|-M[\<n>\]<br>--find-renames[=\<n\>]|名前の変更を検出します。 n が指定されている場合、それは類似性インデックスのしきい値 (つまり、ファイルのサイズと比較した追加/削除の量) です。 たとえば、-M90% は、ファイルの 90% 以上が変更されていない場合、Git は削除/追加のペアを名前変更と見なすことを意味します。 % 記号がない場合、数値は分数として読み取られ、その前に小数点が付きます。 つまり、-M5 は 0.5 になり、したがって -M50% と同じになります。 同様に、-M05 は -M5% と同じです。 検出を正確な名前変更に制限するには、-M100％を使用します。 デフォルトの類似性インデックスは 50% です。|
|-C[\<n\>]<br>--find-copies[=\<n\>]|コピーと名前の変更を検出します。 --find-copies-harder も参照してください。 n を指定すると、-M<n> と同じ意味になります。|
|--find-copies-harder|パフォーマンス上の理由から、デフォルトでは、-C オプションは、コピーの元のファイルが同じ変更セットで変更された場合にのみコピーを検索します。 このフラグにより、コマンドは変更されていないファイルをコピー元の候補として検査します。 これは、大規模なプロジェクトでは非常に高価な操作であるため、慎重に使用してください。 複数の -C オプションを指定しても同じ効果があります。|
|-D<br>--irreversible-delete|つまり、ヘッダーのみを出力し、プレイメージと /dev/null の間の差分は出力しません。 結果として得られるパッチは、patch または git apply で適用することを意図したものではありません。 変更後のテキストの復習だけに集中したい人向けです。 さらに、出力には、手動であっても、そのようなパッチを逆に適用するのに十分な情報が明らかに不足しているため、オプションの名前です。<br><br>-B と一緒に使用すると、削除/作成ペアの削除部分のプリイメージも省略されます。|
|-l\<num\>|-M および -C オプションは、O(n^2) の処理時間を必要とします。ここで、n は、潜在的な名前変更/コピー ターゲットの数です。 このオプションは、名前変更/コピー対象の数が指定数を超えた場合に、名前変更/コピーの検出が実行されないようにします。|
|--diff-filter=[(A\|C\|D\|M\|R\|T\|U\|X\|B)…​[*]]|-M および -C オプションは、O(n^2) の処理時間を必要とします。ここで、n は、潜在的な名前変更/コピー ターゲットの数です。このオプションは、名前変更/コピー ターゲットの数が指定された数を超えた場合に、名前変更/コピーの検出が実行されないようにします。<br><br>--diff-filter=[(A\|C\|D\|M\|R\|T\|U\|X\|B)… [*]]<br>追加された (A)、コピーされた (C)、削除された (D)、変更された (M)、名前が変更された (R)、タイプ (つまり、通常のファイル、シンボリックリンク、サブモジュールなど) が変更された (T)、マージされていない (U)、不明 (X)、またはペアリングが壊れている (B)。フィルタ文字の任意の組み合わせ (なしを含む) を使用できます。 * (All-or-none) が組み合わせに追加されると、比較で他の基準に一致するファイルがある場合、すべてのパスが選択されます。他の基準に一致するファイルがない場合は、何も選択されません。<br><br>また、これらの大文字を小文字にして除外することもできます。例えば。 --diff-filter=ad は、追加および削除されたパスを除外します。<br><br>すべての diff がすべてのタイプをフィーチャーできるわけではないことに注意してください。たとえば、インデックスから作業ツリーへの差分には、追加されたエントリを含めることはできません (差分に含まれるパスのセットはインデックスの内容によって制限されるため)。同様に、コピーされて名前が変更されたエントリは、それらのタイプの検出が無効になっている場合は表示されません。|
|-S\<string\>|ファイル内の指定された文字列 (つまり、追加/削除) の出現回数を変更する相違点を探します。 スクリプト作成者の使用を目的としています。<br><br>これは、コードの正確なブロック (構造体など) を探していて、そのブロックが最初に作成されてからの履歴を知りたい場合に便利です。 -S、ブロックの最初のバージョンを取得するまで続けます。<br><br>バイナリ ファイルも検索されます。|
|-G\<regex\>|\<regex\> に一致する追加/削除された行がパッチ テキストに含まれている相違点を探します。 |
|--find-object=\<object-id\>|指定されたオブジェクトの出現回数を変更する相違点を探します。 -S と同様、特定の文字列を検索するのではなく、特定のオブジェクト ID を検索するという点で引数が異なるだけです。<br><br>オブジェクトは blob またはサブモジュールのコミットです。 これは、ツリーも検索するための git-log の -t オプションを意味します。|
|--pickaxe-all|指定されたオブジェクトの出現回数を変更する相違点を探します。 -S と同様、特定の文字列を検索するのではなく、特定のオブジェクト ID を検索するという点で引数が異なるだけです。<br><br>オブジェクトは blob またはサブモジュールのコミットです。 これは、ツリーも検索するための git-log の -t オプションを意味します。|
|--pickaxe-regex|-S に指定された \<string\> を、一致する拡張 POSIX 正規表現として扱います。 |
|-O\<orderfile\>|ファイルが出力に表示される順序を制御します。 これは、diff.orderFile構成変数をオーバーライドします（git-config [1]を参照）。 diff.orderFile をキャンセルするには、-O/dev/null を使用します。<br><br>出力順序は、<orderfile>内のglobパターンの順序によって決定されます。 最初のパターンに一致するパス名を持つすべてのファイルが最初に出力され、2番目のパターンに一致する（ただし最初のパターンには一致しない）パス名を持つすべてのファイルが次に出力されます。 どのパターンにも一致しないパス名を持つすべてのファイルは、ファイルの最後に暗黙のすべて一致パターンがあるかのように、最後に出力されます。 複数のパス名が同じランク (それらは同じパターンに一致するが、それ以前のパターンには一致しない) である場合、それらの相互の出力順序は通常の順序です。※6|

※1
* default, myers  
  基本的な貪欲な差分アルゴリズム。 現在、これがデフォルトです。
* minimal  
  可能な限り最小の差分が生成されるように、余分な時間を費やしてください。
* patience  
  パッチを生成するときは、 "patience diff" アルゴリズムを使用してください。
* histogram  
  このアルゴリズムは、patience algorithmを拡張して、「発生率の低い共通要素をサポート」します。
  
※2
* changes  
  ソースから削除された、または宛先に追加された行をカウントして、dirstat番号を計算します。 これは、ファイル内の純粋なコード移動の量を無視します。 つまり、ファイル内の行の再配置は、他の変更ほどカウントされません。 これは、パラメーターが指定されていない場合のデフォルトの動作です。
* lines  
  通常の行ベースのdiff分析を実行し、削除/追加された行数を合計して、dirstat番号を計算します。 （バイナリファイルの場合、バイナリファイルには行の自然な概念がないため、代わりに64バイトのチャンクをカウントします）。 これは、変更動作よりもコストのかかる--dirstat動作ですが、ファイル内の再配置された行を他の変更と同じようにカウントします。 結果の出力は、他の-* statオプションから得られるものと一致しています。
* files  
  変更されたファイルの数を数えて、dirstatの数を計算します。 変更された各ファイルは、dirstat分析で等しくカウントされます。 これは、ファイルの内容をまったく調べる必要がないため、計算上最も安価な--dirstatの動作です。
* cumulative  
  親ディレクトリの子ディレクトリの変更もカウントします。 累積を使用する場合、報告されるパーセンテージの合計が100％を超える場合があることに注意してください。 デフォルトの（非累積）動作は、非累積パラメーターで指定できます。
* \<limit\>  
  整数パラメーターは、カットオフパーセント（デフォルトでは3％）を指定します。 変更のこの割合より少ない貢献をしているディレクトリは、出力に表示されません。<br><br>例：以下は、変更されたファイルの総数の10％未満のディレクトリを無視し、親ディレクトリに子ディレクトリの数を累積しながら、変更されたファイルをカウントします：-dirstat = files、10、cumulative。

※3
* no  
  移動した線は強調表示されません。
* default  
  zebra の同義語です。 これは、将来、より賢明なモードに変更される可能性があります。
* plain
  ある場所で追加され、別の場所で削除された行は、color.diff.newMovedで色付けされます。 同様に、color.diff.oldMovedは、diffの別の場所に追加された削除された行に使用されます。 このモードは移動された行をピックアップしますが、コードのブロックが順列なしで移動されたかどうかを判断することはレビューではあまり役に立ちません。
* blocks  
  少なくとも20文字の英数字の移動テキストのブロックが貪欲に検出されます。 検出されたブロックは、color.diff。{old、new}移動された色のいずれかを使用してペイントされます。 隣接するブロックを区別することはできません。
* zebra  
  移動されたテキストのブロックは、ブロックモードの場合と同様に検出されます。 ブロックは、color.diff。{old、new} Moved colorまたはcolor.diff。{old、new} MovedAlternativeのいずれかを使用してペイントされます。 2つの色の間の変化は、新しいブロックが検出されたことを示します。
* dimmed-zebra  
  ゼブラに似ていますが、移動されたコードの興味のない部分の追加の調光が実行されます。 隣接する2つのブロックの境界線は興味深いと見なされ、残りは興味深いものではありません。 dimmed_zebraは非推奨の同義語です。
* --no-color-moved  
  移動検出をオフにします。 これは、構成設定をオーバーライドするために使用できます。 --color-moved = noと同じです。

※4
* no  
  移動検出を実行するときは、空白を無視しないでください。
* ignore-space-at-eol  
  EOLで空白の変更を無視します。
* ignore-space-change  
  空白の量の変更は無視してください。 これは、行末の空白を無視し、1つ以上の空白文字の他のすべてのシーケンスを同等と見なします。
* ignore-all-space  
  行を比較するときは空白を無視します。 これは、一方の行に空白があり、もう一方の行に空白がない場合でも、違いを無視します。
* allow-indentation-change  
  最初に移動検出で空白を無視し、空白の変更が行ごとに同じである場合にのみ、移動されたコードブロックをブロックにグループ化します。 これは他のモードと互換性がありません。

※5
* color  
  色のみを使用して変更された単語を強調表示します。 --colorを意味します。
* plain  
  単語を[-removed-]および{+ added +}として表示します。 区切り文字が入力に表示されている場合、区切り文字をエスケープしようとしないため、出力があいまいになる可能性があります。
* porcelain  
  スクリプトの使用を目的とした特別な行ベースの形式を使用します。 追加/削除/変更されていないランは、通常の統一された差分形式で印刷されます。行の先頭が+/- / ``文字で始まり、行の終わりまで続きます。 入力の改行は、独自の行のチルダ〜で表されます。
* none  
  単語の差分を再度無効にします。

最初のモードの名前にもかかわらず、有効になっている場合、すべてのモードで変更された部分を強調するために色が使用されることに注意してください。


※6 \<orderfile\> is parsed as follows:  
* 空白行は無視されるため、読みやすくするための区切り文字として使用できます。